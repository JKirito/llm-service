# Development Dockerfile for Bun
FROM oven/bun:1.3.1

# Set working directory
WORKDIR /app

# Copy package files
COPY package.json bun.lockb* ./
COPY packages/*/package.json ./packages/*/
COPY apps/*/package.json ./apps/*/

# Install all dependencies (including dev dependencies)
RUN bun install

# Copy source code (will be mounted as volume in dev)
COPY . .

# Build packages
RUN bun run build:packages

# Set environment variables
ENV NODE_ENV=development
ENV PORT=4000
ENV HOST=0.0.0.0

# Expose port
EXPOSE 4000

# Keep container running and watch for changes
CMD ["bun", "run", "dev:api"]

